# # テスト結果報告書

## 1. 単語登録機能のテスト

### 1.1 正常系テスト

| 1-1 | 基本的な単語登録
* **入力**: 英単語: "apple"<br>日本語: "りんご"
* **期待結果**: 登録成功メッセージ表示<br>データベースに登録されていることを確認
* **実際結果**: 
=== 英単語暗記アプリ ===
1: 単語を登録する
...
英単語を入力してください：
apple
日本語訳を入力してください：
りんご
単語を登録しました。(1 / 1000)

vocabulary_db=# SELECT english, japanese FROM words WHERE english = 'apple';
 english | japanese 
---------+----------
 apple   | りんご
(1 行)
* **判定**: OK

| 1-2 | スペースを含む単語登録
* **入力**: 英単語: "ice cream"<br>日本語: "アイスクリーム" 
* **期待結果**: 登録成功メッセージ表示<br>データベースに登録されていることを確認
* **実際結果**: 
=== 英単語暗記アプリ ===
1: 単語を登録する
...
英単語を入力してください：
ice cream
日本語訳を入力してください：
アイスクリーム
単語を登録しました。(2 / 1000)

vocabulary_db=# SELECT english, japanese FROM words WHERE english = 'ice cream';
  english  |    japanese    
-----------+----------------
 ice cream | アイスクリーム
(1 行)
* **判定**: OK

| 1-3 | 記号を含む単語登録
* **入力**: "e-mail"<br>日本語: "メール"
* **期待結果**: 登録成功メッセージ表示<br>データベースに登録されていることを確認
* **実際結果**: 
=== 英単語暗記アプリ ===
1: 単語を登録する
...
英単語を入力してください：
e-mail
日本語訳を入力してください：
メール
単語を登録しました。(3 / 1000)

vocabulary_db=# SELECT english, japanese FROM words WHERE english = 'e-mail';
 english | japanese 
---------+----------
 e-mail  | メール
(1 行)
* **判定**: OK


### 1.2 異常系テスト

| 1-4 | 空文字の入力
* **入力**: 英単語: ""<br>日本語: ""
* **期待結果**: エラーメッセージ表示<br>データベースに登録されないことを確認
* **実際結果**: 
=== 英単語暗記アプリ ===
1: 単語を登録する
...
英単語を入力してください：

日本語訳を入力してください：

入力が正しくありません。もう一度入力してください。
* **判定**: OK

| 1-5 | 英単語のみ空文字
* **入力**: 英単語: ""<br>日本語: "りんご"
* **期待結果**: エラーメッセージ表示<br>データベースに登録されないことを確認
* **実際結果**: 
=== 英単語暗記アプリ ===
1: 単語を登録する
...
英単語を入力してください：

日本語訳を入力してください：
りんご
入力が正しくありません。もう一度入力してください。
* **判定**: OK

| 1-6 | 日本語のみ空文字
* **入力**: "apple"<br>日本語: ""
* **期待結果**: エラーメッセージ表示<br>データベースに登録されないことを確認
* **実際結果**: 
=== 英単語暗記アプリ ===
1: 単語を登録する
...
英単語を入力してください：
apple
日本語訳を入力してください：

入力が正しくありません。もう一度入力してください。
* **判定**: OK

| 1-7 | 文字数制限超過
* **入力**: 101文字の文字列<br>日本語: "テスト"
* **期待結果**: エラーメッセージ表示<br>データベースに登録されないことを確認
* **実際結果**: 
=== 英単語暗記アプリ ===
1: 単語を登録する
...
英単語を入力してください：
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
日本語訳を入力してください：
テスト
入力が正しくありません。もう一度入力してください。
* **判定**: OK

## 2. クイズ機能のテスト

### 2.1 正常系テスト

| 2-1 | 正解の判定
* **前提条件**: "apple", "りんご"がDBに登録済み | 
* **入力**: "りんご"
* **期待結果**: "正解です！"と表示
* **実際結果**: 
=== 英単語暗記アプリ ===
2: クイズを受ける
...
=== クイズを開始します ===
※ 終了したいときは「q」を入力してください。

apple の意味は？
りんご
正解です！
* **判定**: OK


| 2-2 | 不正解の判定
* **前提条件**: "apple", "りんご"がDBに登録済み
* **入力**: "バナナ" 
* **期待結果**: "不正解です。正解はりんごでした。"
* **実際結果**: 
=== 英単語暗記アプリ ===
2: クイズを受ける
...
=== クイズを開始します ===
※ 終了したいときは「q」を入力してください。

apple の意味は？
バナナ
不正解です。正解はりんごでした。
* **判定**: OK

| 2-3 | 最終スコア表示
* **前提条件**: 単語三つがDBに登録済み
* **入力**: クリーム, メール, りんご
* **期待結果**: "3問中2問正解でした！"と表示
* **実際結果**: 
=== 英単語暗記アプリ ===
2: クイズを受ける
...
=== クイズを開始します ===
※ 終了したいときは「q」を入力してください。

ice cream の意味は？
クリーム
不正解です。正解はアイスクリームでした。

e-mail の意味は？
メール
正解です！

apple の意味は？
りんご
正解です！

クイズ終了！
3問中2問正解でした！
* **判定**: OK

### 2.2 異常系テスト

| 2-4 | 単語未登録時の動作
* **前提条件**: DBに登録単語なし
* **入力**: ２
* **期待結果**:　"登録された単語がありません。"と表示
* **実際結果**:
番号を選んでください: 2
登録された単語がありません。
* **判定**: OK

## 3. データベース操作機能のテスト

### 3.1 単語更新テスト
| 3-1 | 単語の更新 | 
* **前提条件**: "apple", "りんご"が登録済み
* **入力**: 英単語: "apple"<br>新日本語訳: "アップル"
* **期待結果**:更新成功メッセージ表示<br>DBの値が更新されていることを確認
* **実際結果**:
=== 英単語暗記アプリ ===
6: 単語を更新する
...
更新する英単語を入力してください：
apple
新しい日本語訳を入力してください：
アップル
単語を更新しました。

vocabulary_db=# SELECT english, japanese FROM words WHERE english = 'apple';
 english | japanese 
---------+----------
 apple   | アップル
(1 行)
* **判定**: OK

| 3-2 | 存在しない単語の更新
* **入力**: 英単語: "notexist"<br>新日本語訳: "存在しない"
* **期待結果**:エラーメッセージ表示
* **実際結果**:
=== 英単語暗記アプリ ===
6: 単語を更新する
...
更新する英単語を入力してください：
notexist
新しい日本語訳を入力してください：
存在しない
対象の単語が見つかりません。
* **判定**: OK


### 3.2 単語削除テスト

| 3-3 | 単語の削除
* **前提条件**: "apple", "りんご"が登録済み
* **入力**: 英単語: "apple"
* **期待結果**:削除成功メッセージ表示<br>DBから削除されていることを確認
* **実際結果**: 
=== 英単語暗記アプリ ===
5: 単語を削除する
...
削除する英単語を入力してください：
apple
単語を削除しました。

vocabulary_db=# SELECT english, japanese FROM words WHERE english = 'apple';
 english | japanese 
---------+----------
(0 行)
* **判定**: OK

| 3-4 | 存在しない単語の削除
* **入力**: 英単語: "notexist"
* **期待結果**:エラーメッセージ表示
* **実際結果**:
=== 英単語暗記アプリ ===
5: 単語を削除する
...
削除する英単語を入力してください：
notexist
対象の単語が見つかりません。
* **判定**: OK

### 3.3 CSVインポートテスト

| 3-5 | 正常なCSVファイル読み込み 
* **入力**:  words.csv<br>(正しい形式)
* **期待結果**:インポート成功メッセージ表示<br>DBに登録されていることを確認
* **実際結果**:
=== 英単語暗記アプリ ===
3: CSVファイルから単語をインポート
...
現在登録済み単語数: 0 個 / 上限: 1000 個
残り登録可能単語数: 1000 個
CSVファイル名を入力してください：
words.csv
取り込み結果：登録 100 個 / スキップ 0 個

vocabulary_db=# SELECT COUNT(*) FROM words;
 count 
-------
   100
(1 行)
* **判定**: OK

| 3-6 | 存在しないファイル指定
* **入力**:  notexist.csv
* **期待結果**:エラーメッセージ表示
* **実際結果**:
CSVファイル名を入力してください：
notexist.csv
エラーが発生しました。詳細は以下をご確認ください。
* **判定**: OK

| 3-7 | 不正な形式のCSV
* **入力**:  invalid.csv<br>(カンマなし)
* **期待結果**:エラーメッセージ表示
* **実際結果**:
CSVファイル名を入力してください：
invalid.csv
エラー：CSVの形式が不正です（カンマ区切り 'english,japanese' を使用してください）。
* **判定**: OK

### 3.4 CSVエクスポートテスト

| 3-8 | 正常なエクスポート
* **前提条件**:単語がDBに登録済み
* **入力**: export.csv
* **期待結果**:エクスポート成功メッセージ表示<br>ファイルが作成されていることを確認
* **実際結果**: 
CSVファイル名を入力してください：
export.csv
2個の単語を保存しました。
保存先：export.csv
* **判定**: OK


## 4. 性能テスト

### 4.1 レスポンス時間テスト

| 4-1 | 単語登録の応答時間
* **期待結果**:1秒以内
* **実際結果**: 
4-1 単語登録の応答時間 : 106 ms
* **判定**: OK

| 4-2 | クイズ出題の応答時間
* **前提条件**:100単語登録済み
* **期待結果**:1秒以内
* **実際結果**: 
4-2 クイズ出題の応答時間 : 111 ms
* **判定**: OK
 
| 4-3 | CSVインポートの応答時間
* **入力**:words1000.csv(1000単語のCSV)
* **期待結果**:1秒以内
* **実際結果**: 
4-3 CSVインポートの応答時間 : 2067 ms
* **判定**:NG,CSVインポートが1件ずつDBに登録される方式のため、処理回数が多くなり応答時間が1秒を超えた。

### 4.2 データ量テスト

| 4-4 | 大量データ登録
* **期待結果**:1000単語まで正常に登録可能
* **実際結果**: words1000.csv（1000単語）の取込が正常に完了し、登録件数が1000件となったことを確認。
* **判定**: OK


| 4-5 | 大量データでのクイズ実行
* **前提条件**:1000単語登録済み
* **期待結果**:正常に動作する
* **実際結果**: 1000件登録済みの状態でもクイズ機能は正常に動作し、問題がランダムに出題された。
* **判定**: OK

### 4.3 データベース接続テスト

| 4-6 | DB接続エラー 
* **入力**: brew services stop postgresql@15
* **期待結果**:DBサーバー停止、エラーメッセージ表示
* **実際結果**:
"エラーが発生しました。詳細は以下をご確認ください。"と表示
* **判定**: OK

| 4-7 | DB再接続
* **入力**: brew services start postgresql@15
* **期待結果**:正常に接続できることを確認
* **実際結果**:
アプリを再起動したところ正常に接続できることを確認した。
* **判定**: OK